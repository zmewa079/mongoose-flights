<%- include('../partials/html-head') %>
<link rel="stylesheet" href="/stylesheets/movies/new.css" />
<%- include('../partials/nav') %>


<main>
  <h1><%= title %></h1>
  <section>
    <div>Airline: </div>
    <div><%= flight.airline %></div>
    <div>Airport: </div>
    <div><%= flight.airport %></div>
    <div>Flight Number: </div>
    <div><%= flight.flightNo %></div>
    <div>Departure: </div>
    <div><%= flight.departs%></div>
  </section>
  
  <h3>Tickets</h3>
  <form action="/flights/<%= flight._id %>/ticket" method="POST">
    <label>Seat:
    <input name="seat" required pattern="[A-F][1-9]\d?">
    </label><br>
    <label>Price:
      <input type="number" name="price">
    </label><br>
    <button type="submit">Add Ticket</button>
  </form>
  <h4><a href="/flights/">Back to main</a></h4>
  <% if (flight.tickets.length) { %> 
  <table>
    <thead>
      <tr>
        <th>Seat</th>
        <th>Price</th>
      </tr>
    </thead>
    <tbody>
      <% flight.tickets.forEach(function(ticket) { %>
        <tr>
          <td><%= ticket.seat %></td>
          <td><%= ticket.price %></td>
        </tr>
        <% }) %>
    </tbody>
  </table>
<% } else { %> 
  <h3>No Tickets Yet</h3>

<h3>Destination</h3>
<section>
  <% if (flight.destination.length) { %>
    <% flight.destination.forEach(function(d) { %>
    <label>Destination Airport</label>
    <div><%= d.airport %></div>
</section>
<h3>Add Destination</h3>
    <form id="add-destination" method="POST" action="/flights/<%= flight._id %>/destinations">
        <label>Add a Destination: </label>
        <select name="airport"> 
            <option value="AUS">AUS</option>
            <option value="DFW">DFW</option>
            <option value="DEN">DEN</option>
            <option value="LAX">LAX</option>
            <option value="SAN">SAN</option>
        </select>
        <input type="submit" value="Add Destination"> 
        </form>
</section>
</body>
</html>
</main>
<%- include("../partials/footer") %>
